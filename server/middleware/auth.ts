// import { serverSupabaseUser } from '#supabase/server';

export default defineEventHandler(async (event) => {

//     const user = await getUserFromSession(event);
    
    
//     const regex = /^\/(login|api\/auth\/me|api\/auth\/login)/;

//   // Test if the route matches the regex
//     regex.test(event.path);
//     // const user = await getUserFromSession(event);
//         // console.log(user)
//     console.log(11111);
//     if (user) event.context.user = user;

//     // console.log(event.path, " : ", regex.test(event.path))

//     if(!regex.test(event.path)) {
        
//         if (!user) {
//             // throw createError({
//             //     statusCode: 401,
//             //     message: 'API auth: Unauthorized',
//             // });
//         }

//     }
        
});